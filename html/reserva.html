<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>V-Vuelos ULACIT</title>
        <link rel="icon" type="image/x-icon" href="../assets/img/favicon.png" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../css/styles.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top"><img src="../assets/img/favicon.png" /></a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ml-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto" id="userNav">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#services">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#portfolio">Explorar Vuelos</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#team">Sobre Nosotros</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#logInReg">Login</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container" >

                <div class="masthead-heading text-uppercase">CheckOut</div>

                <div class="masthead-subheading">Complete los detalles de su reserva: </div>   

                </div>
        </header>

        <hr>


        <div class="card mb-3"style="background-color: #f0f0f5;">
            <center>
            <img style="height: 140px; width: 464px;"
             src="http://www.dusoleil.eu/reservation/images/reservation.png" class="card-img-top" alt="...">
            <div class="card-body" style="background-color: #f0f0f5;">
              <h5 class="card-title">Reservas </h5>

              <form>
     

              
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="inputEmail4">Destino/s</label>
                    <input type="text" class="form-control" id="destiny" placeholder="Destino" readonly>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="inputState">Metodo de Pago</label>
                    <select id="paymentmethod" class="form-control">
                      <option value="" selected>Elegir...</option>
                      <option value="Card">Debito/Credito</option>
                      <option value="EasyPay">EasyPay</option>
                    </select>
                    
                  </div>
                </div>
                  <div>
                  <div class="form-group col-md-4">
                    <label for="inputPassword4">Numero de Boletos</label>
                    <input type="number" class="form-control" id="cantidad" placeholder="Numero de la Boletos" value="1" min="1" max="5" onchange="loadAmounts()">
                  </div>
                </div>
                <class class="form-group">
                  
<hr>

                  <div class="col-sm-2" style="text-align: center;">
                    <div>
                        <div class="form-group row">
                            <h4  class="col-sm-4 col-form-label" >Subtotal:</h4>
                            <input class="inputLabel2 col-sm-4 col-form-label" id="Subtotal" readonly >
                            </div>
        
        
        
                            <div class="form-group row">
                                <h4  class="col-sm-4 col-form-label" >IVA:</h4>
                                <input class="inputLabel2 col-sm-4 col-form-label" id="Tax" readonly>
                                </div>
                                <div class="form-group row">
                                    <h4  class="col-sm-4 col-form-label" >Total:</h4>
                                    <input class="inputLabel2 col-sm-4 col-form-label" id="Total" readonly>
                                </div>
        
                      </div>
                    </div>

                    <label for="">Recuerda estar 3 horas antes para pagar la reservacion.</label>


                </class>
                <br>
                <center>
                
                <button type="button" class="btn btn-success" id="process" style="height: 100px; width: 900px;">Realizar Reserva</button>
            </center>
              </form>
            </div>
          </div>
        </center>


            
        


        
<footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-left">Copyright V-Vuelos 2021</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-right">
                        <a class="mr-3" href="#!">Privacy Policy</a>
                        <a href="#!">Terms of Use</a>
                    </div>
                </div>
            </div>
</footer>
        

        

        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
        

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>

        <script>
            if(localStorage.getItem("User") != null){
                document.getElementById('userNav').innerHTML = '';
                document.getElementById('userNav').innerHTML = `
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#services">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#team">Sobre Nosotros</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/seeVuelos.html">Vuelos</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/historialreservas.html">Reservas</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/historialcompra.html">Compras</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/carrito.html">Carrito</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" value="${localStorage.getItem("User")}">${localStorage.getItem("User")}</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" onclick="logout()">LogOut</a></li>
                `;
            }
            const logout = async function(){
                localStorage.removeItem("User");
                localStorage.removeItem("Rol");
                var cartClean = await fetch('http://localhost:50498/api/logoutOrBuy/0',{
            method:'DELETE',
            headers:{
                'Content-Type':'application/json'
            },
            body:JSON.stringify({

            })
        }) 
                window.location.href = "../index.html";
            }

        </script>


        <!-- Core theme JS-->
        <script src="../js/scripts.js"></script>

        <script>
          let Subtotal = {};
          let Tax = {};
          let Total = {};
          let Subtotal2 = {};

          Subtotal = document.querySelector('#Subtotal');
          Tax = document.querySelector('#Tax');
          Total = document.querySelector('#Total');
          cantidad = document.querySelector('#cantidad');

          Subtotal.value = 0*cantidad.value;
          Tax.value = Subtotal.value*0.13;
          Total.value = Subtotal.value + Tax.value;

          let specefic = [];
          let info = [];
          let existing =[];
            const loadAmounts = async () =>{
              Subtotal.value = 0*cantidad.value;
              Tax.value = Subtotal.value*0.13;
              Total.value = Subtotal.value + Tax.value;
              var getTotalPrice = await fetch('http://localhost:50498/api/Carrito').then(response => response.json());
              existing = await fetch('http://localhost:50498/api/Carrito').then(response => response.json());
              var length = Object.keys(existing).length;
              for (let index = 0; index < length; index++) {
                  info = await fetch('http://localhost:50498/api/Carrito/'+index).then(response => response.json());
                  Subtotal.value = parseFloat(Subtotal.value) + parseFloat(info.Precio);
                  Tax.value = (parseFloat(Subtotal.value)*0.13);
                  Total.value = parseFloat(Subtotal.value) + parseFloat(Tax.value);
                }
                Subtotal.value = parseFloat(Subtotal.value)*cantidad.value;
                Tax.value = Subtotal.value*0.13;
                Total.value = parseFloat(Subtotal.value) + parseFloat(Tax.value);
            }
            loadAmounts();
        </script>

        <script>
            const cap = function(){
            var caracteres = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V'
            ,'W','X','Y','Z','1','2','3','4','5','6','7','8','9','0','a','b','c','d','e','f','g','h','i',
            'j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z', '!','@','#','$','%','^','&','*','+']
                 var a = caracteres[Math.floor(Math.random()*71)];
                 var b = caracteres[Math.floor(Math.random()*71)];
                 var c = caracteres[Math.floor(Math.random()*71)];
                 var d = caracteres[Math.floor(Math.random()*71)];
                 var e = caracteres[Math.floor(Math.random()*71)];
                 var f = caracteres[Math.floor(Math.random()*71)];

                 var final = a+b+c+d+e+f;
                 document.getElementById("capt").value=final;
            }
            //cap();
        </script>

        <!--Log In JS-->
        <script src="../js/reserva.js"></script>

        
        
    </body>
</html>